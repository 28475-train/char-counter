# メンテナンスモードを有効化

# RewriteEngineを有効にする
RewriteEngine On

# ----------------------------------------------------
# 1. メンテナンスページ (waiting.html) へのアクセスは許可
# ----------------------------------------------------
# ルートの waiting.html へのアクセスはリダイレクトしない
RewriteCond %{REQUEST_URI} !/waiting\.html$ [NC]
# SPフォルダの waiting.html へのアクセスはリダイレクトしない
RewriteCond %{REQUEST_URI} !/SP/waiting\.html$ [NC]

# ----------------------------------------------------
# 2. 必須ファイル（CSS, JS, 画像, XML, TXT）へのアクセスは許可
# ----------------------------------------------------
# CSS, JS, 画像、XML (sitemap.xmlなど), TXT (ads.txtなど) ファイルはリダイレクトしない
RewriteCond %{REQUEST_URI} !\.(css|js|png|jpg|gif|xml|txt)$ [NC]

# ----------------------------------------------------
# 3. 上記以外のすべてのHTMLファイルへのアクセスを waiting.html にリダイレクト
# ----------------------------------------------------
# R=302 は一時的なリダイレクトを意味し、SEOへの影響を最小限に抑えます。
RewriteRule ^(.*)\.html$ /waiting.html [R=302,L]
