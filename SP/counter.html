<!DOCTYPE html>
<html lang="ja" data-ads="true">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ã€SPç‰ˆã€‘æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆ ä¿å­˜ãƒ„ãƒ¼ãƒ« | ãƒ„ãƒ¼ãƒ«</title>
<link rel="stylesheet" href="../style.css">
<style>
/* Font optimization: æ—¥æœ¬èª/è‹±èªãƒ•ã‚©ãƒ³ãƒˆã®æŒ‡å®šã‚’å¾©æ—§ */
body, .content-wrapper, textarea, input {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, 
                 "Hiragino Kaku Gothic ProN", "Meiryo", "Osaka", "MS PGothic", "sans-serif";
}

/* ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼è¡¨ç¤ºã‚¨ãƒªã‚¢ */
.count-display {
    display: flex;
    justify-content: space-around; 
    flex-wrap: wrap;
    background: var(--card);
    padding: 10px 5px; /* SPç‰ˆã«åˆã‚ã›ã¦ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°èª¿æ•´ */
    border-radius: 8px;
    margin-bottom: 15px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.count-item {
    text-align: center;
    padding: 5px 0;
    width: 45%; /* 2åˆ—è¡¨ç¤ºã‚’æƒ³å®š */
}
.count-label {
    display: block;
    font-size: 0.7em;
    color: var(--text-soft);
    margin-bottom: 1px;
    white-space: nowrap;
}
.count-value {
    font-size: 1.3em;
    font-weight: bold;
    color: var(--text-color);
}
/* ç›®æ¨™æ–‡å­—æ•°å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´ */
#targetCount {
    width: 60px; /* SPç‰ˆã«åˆã‚ã›ã¦å¹…ã‚’ç‹­ã */
    text-align: center;
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 2px 5px;
    font-size: 1em; /* SPç‰ˆã«åˆã‚ã›ã¦ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºèª¿æ•´ */
}

/* ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ */
#textArea {
    width: 100%;
    min-height: 300px; /* SPç‰ˆã«åˆã‚ã›ã¦é«˜ã•ã‚’èª¿æ•´ */
    padding: 15px;
    border: 1px solid var(--border);
    border-radius: 8px;
    resize: vertical;
    font-size: 14px;
    line-height: 1.6;
    background: var(--background);
    color: var(--text-color);
    box-sizing: border-box;
}

/* ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ */
.action-buttons-container {
    display: flex;
    justify-content: space-between; /* SPç‰ˆã¯ä¸¡ç«¯æƒãˆã§ãƒœã‚¿ãƒ³ã‚’å¤§ãã */
    gap: 10px;
    margin-top: 15px;
}
.action-buttons-container button {
    flex-grow: 1; /* ãƒœã‚¿ãƒ³ã‚’å‡ç­‰ã«åºƒã’ã‚‹ */
    padding: 12px 10px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    font-size: 0.9em;
    transition: background-color 0.2s;
}
#clearButton {
    background-color: var(--border);
    color: var(--text-color);
}
#clearButton:hover {
    background-color: #ccc;
}
/* ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ã«ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼ã‚’é©ç”¨ */
#downloadButton {
    background-color: var(--accent);
    color: #fff;
}
#downloadButton:hover {
    background-color: var(--accent-dark);
}
</style>
</head>
<body data-theme="light_green">
<script>
// --- ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ± ---
const APP_VERSION = "v1.2.0"; 
// ----------------------
const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
if (!isMobile) { location.href = '../counter.html'; }

function toggleMenu() { document.getElementById('sideNav').classList.toggle('open'); }

// â˜…â˜…â˜… æ©Ÿèƒ½å¾©æ—§: ã‚«ã‚¦ãƒ³ãƒˆãƒ­ã‚¸ãƒƒã‚¯ã®å¼·åŒ– â˜…â˜…â˜…
function updateCounts() {
    const textArea = document.getElementById('textArea');
    const text = textArea.value;
    
    // æ–‡å­—æ•° (ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—)
    const charCount = text.length;
    
    // ç›®æ¨™æ–‡å­—æ•°
    const targetCountInput = document.getElementById('targetCount');
    const targetCount = parseInt(targetCountInput.value) || 0;

    // æ®‹ã‚Šæ–‡å­—æ•° (ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³)
    const remainingCount = targetCount - charCount;
    
    // è¡Œæ•°
    const lineCount = text.split('\n').length;

    document.getElementById('charCount').textContent = charCount;
    document.getElementById('lineCount').textContent = lineCount;
    document.getElementById('remainingCount').textContent = remainingCount;
    
    // ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³è¡¨ç¤ºã®è‰²å¤‰æ›´ (ç›®æ¨™ã‚’è¶…ãˆãŸå ´åˆ)
    const remainingDisplay = document.getElementById('remainingCount');
    remainingDisplay.style.color = remainingCount < 0 ? 'red' : 'var(--text-color)';
}

// â˜…â˜…â˜… æ©Ÿèƒ½å¾©æ—§: ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ã®è¿½åŠ  â˜…â˜…â˜…
function downloadText() {
    const text = document.getElementById('textArea').value;
    // ãƒ•ã‚¡ã‚¤ãƒ«åã®ç”Ÿæˆä¾‹: text_count_20251214.txt
    const filename = "text_count_" + new Date().toISOString().slice(0, 10).replace(/-/g, "") + ".txt";
    
    // Blobã‚’ä½œæˆã—ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã‚’ç”Ÿæˆ
    const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
    const url = URL.createObjectURL(blob);
    
    const a = document.createElement('a');
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
}

window.onload = function() { 
    document.getElementById('appVersionDisplay').textContent = APP_VERSION; 
    document.getElementById('versionDisplay').textContent = APP_VERSION;
    
    // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
    const textArea = document.getElementById('textArea');
    const targetCountInput = document.getElementById('targetCount');
    const clearButton = document.getElementById('clearButton');
    const downloadButton = document.getElementById('downloadButton');

    textArea.addEventListener('input', updateCounts);
    targetCountInput.addEventListener('input', updateCounts);

    clearButton.addEventListener('click', () => {
        textArea.value = '';
        updateCounts();
    });
    
    downloadButton.addEventListener('click', downloadText);
    
    // åˆæœŸã‚«ã‚¦ãƒ³ãƒˆã®å®Ÿè¡Œ
    updateCounts();
}
</script>

<div class="main-content-area">

    <header class="header">
        <div class="menu-toggle" onclick="toggleMenu()">â˜°</div>
        <a href="counter.html" class="header-title" style="font-size: 1.2em;">æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆ (SPç‰ˆ)</a>
    </header>

    <div class="top-ad-header" style="height: 50px;">
        <div id="ad-area-top-sp">
            <script src="https://adm.shinobi.jp/o/b4938a5bb7d245347d3a4f3bf5b38328"></script>
        </div>
    </div>

    <nav class="side-nav" id="sideNav">
        <a href="counter.html" class="active-tab">ğŸ“ æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆ</a> 
        <a href="roulette.html">ğŸ² ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</a> 
        <a href="settings.html">âš™ è¨­å®š</a>
        <a href="help.html">ãƒ˜ãƒ«ãƒ—</a>
        <a href="about.html">åˆ¶ä½œè€…</a>
    </nav>
    
    <div class="content-wrapper">

        <h1>æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆãƒ»ä¿å­˜ãƒ„ãƒ¼ãƒ«</h1>
        <p style="color: var(--text-soft); margin-top: -10px; margin-bottom: 15px; font-size: 0.9em;">æ–‡ç« ã®æ–‡å­—æ•°ã€è¡Œæ•°ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¨ˆæ¸¬ã—ã€ç›®æ¨™æ–‡å­—æ•°ã‹ã‚‰ã®ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã‚‚è¡Œãˆã¾ã™ã€‚</p>

        <div class="count-display">
            <div class="count-item">
                <span class="count-label">æ–‡å­—æ•° (ç¾åœ¨)</span>
                <span id="charCount" class="count-value">0</span>
            </div>
            <div class="count-item">
                <span class="count-label">è¡Œæ•°</span>
                <span id="lineCount" class="count-value">1</span>
            </div>
            <div class="count-item">
                <span class="count-label">ç›®æ¨™æ–‡å­—æ•°</span>
                <input type="number" id="targetCount" class="count-value" value="400" min="1" max="10000">
            </div>
            <div class="count-item">
                <span class="count-label">æ®‹ã‚Šæ–‡å­—æ•° (CD)</span>
                <span id="remainingCount" class="count-value">400</span>
            </div>
        </div>
        <textarea id="textArea" placeholder="ã“ã“ã«æ–‡ç« ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."></textarea>

        <div class="action-buttons-container">
            <button id="clearButton">ã‚¯ãƒªã‚¢</button>
            <button id="downloadButton">TXTä¿å­˜</button>
        </div>
        </div>
</div>

<div class="bottom-ad-footer" style="height: 50px;">
    <div id="ad-area-bottom-sp">
        <script src="https://adm.shinobi.jp/o/b4938a5bb7d245347d3a4f3bf5b38328"></script>
    </div>
</div>

<footer class="footer" style="text-align:center; padding: 20px 0; font-size: 0.8em; color: var(--text-soft);">
    <p>Version <span id="appVersionDisplay"></span></p>
</footer>
</body>
</html>
