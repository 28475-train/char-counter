<!DOCTYPE html>
<html lang="ja" data-ads="true">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ã€SPç‰ˆã€‘è¨­å®š | ãƒ„ãƒ¼ãƒ«</title>
<link rel="stylesheet" href="../style.css">
<style>
/* settings.htmlå°‚ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« */
.setting-group{
  background: var(--card);
  border-radius: 12px;
  padding: 15px; 
  margin-bottom: 20px;
  border: 1px solid var(--border);
}
.setting-item{
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px solid var(--border-soft);
  gap: 10px; 
  flex-wrap: wrap; /* SPå‘ã‘ã«æŠ˜ã‚Šè¿”ã—ã‚’è¨±å¯ */
}
.setting-item:last-child { border-bottom: none; }
.setting-item label {
    flex-grow: 1;
    min-width: 100px;
}
.setting-item input[type="number"] {
    width: 100px; 
    text-align: right;
}
.theme-options {
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-end; /* SPã§ã¯å³å¯„ã›ã«ã™ã‚‹ */
}
.theme-options button{
    padding: 8px 10px; margin-left: 5px; margin-top: 5px; border: 1px solid var(--border); border-radius: 4px; cursor: pointer;
    background-color: var(--background); color: var(--text-color);
}
.theme-options button.active { border-color: var(--accent); font-weight: bold; background-color: var(--accent-light); }
</style>
</head>
<body data-theme="light_green">
<script>
// --- ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ± ---
const APP_VERSION = "v1.2.0"; 
// ----------------------

// SP/PCæŒ¯ã‚Šåˆ†ã‘ã¨ãƒªãƒ•ã‚¡ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯ (æ¯å›åŒæ„)
const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
if (!isMobile) {
    location.href = '../counter.html';
} else {
    if (!document.referrer.includes('SP/index.html')) {
        location.href = 'index.html'; 
    }
}

// === è¨­å®šå‡¦ç†é–¢æ•° (PCç‰ˆã¨å…±é€šãƒ­ã‚¸ãƒƒã‚¯) ===

function applyTheme(theme) {
    document.body.setAttribute('data-theme', theme);
    document.querySelectorAll('.theme-options button').forEach(btn => {
        btn.classList.remove('active');
        if (btn.textContent.toLowerCase().replace(' ', '_') === theme) {
            btn.classList.add('active');
        }
    });
}

function setTheme(theme) {
    localStorage.setItem('theme', theme);
    applyTheme(theme);
}

function saveDisplaySettings() {
    const hideAds = document.getElementById('hideAds').checked;
    const ignoreSpaces = document.getElementById('ignoreSpaces').checked;
    
    localStorage.setItem('hideAds', hideAds);
    localStorage.setItem('ignoreSpaces', ignoreSpaces);
    
    document.body.setAttribute('data-ads', hideAds ? 'false' : 'true');
    alert('è¡¨ç¤ºè¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚');
}

function saveCustomCounterSettings() {
    const targetValue = document.getElementById('customTargetValue').value;
    
    if (targetValue > 0) {
        localStorage.setItem('customTargetValue', targetValue);
        alert(`ã‚«ã‚¹ã‚¿ãƒ ç›®æ¨™ã‚’ ${targetValue} ã«è¨­å®šã—ã¾ã—ãŸã€‚`);
    } else {
        alert('ç„¡åŠ¹ãªç›®æ¨™å€¤ã§ã™ã€‚1ä»¥ä¸Šã®æ•°å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
    }
}

function clearHistory() {
    if (confirm('è‡ªå‹•ä¿å­˜ã•ã‚ŒãŸå±¥æ­´ãƒ‡ãƒ¼ã‚¿ã‚’ã™ã¹ã¦å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) {
        localStorage.removeItem('autoSavedText');
        alert('å±¥æ­´ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚');
    }
}

// === ãƒ­ãƒ¼ãƒ‰å‡¦ç† ===
window.onload = function() {
    // ãƒ†ãƒ¼ãƒã®ãƒ­ãƒ¼ãƒ‰
    const savedTheme = localStorage.getItem('theme') || 'light_green';
    applyTheme(savedTheme);

    // è¡¨ç¤ºè¨­å®šã®ãƒ­ãƒ¼ãƒ‰
    document.getElementById('hideAds').checked = localStorage.getItem('hideAds') === 'true';
    document.getElementById('ignoreSpaces').checked = localStorage.getItem('ignoreSpaces') === 'true';

    // ã‚«ã‚¹ã‚¿ãƒ ç›®æ¨™ã®ãƒ­ãƒ¼ãƒ‰
    document.getElementById('customTargetValue').value = localStorage.getItem('customTargetValue') || 1000;

    document.getElementById('appVersionDisplay').textContent = APP_VERSION;
}

function toggleMenu() { document.getElementById('sideNav').classList.toggle('open'); }
</script>

<div class="top-ad-header" style="height: 50px;">
    <div id="ad-area-top-sp">
        <script src="https://adm.shinobi.jp/o/b4938a5bb7d245347d3a4f3bf5b38328"></script>
        </div>
</div>

<div class="main-content-area">

    <header class="header">
        <div class="menu-toggle" onclick="toggleMenu()">â˜°</div>
        <a href="counter.html" class="header-title" style="font-size: 1.2em;">âš™ è¨­å®š (SPç‰ˆ)</a>
    </header>

    <nav class="side-nav" id="sideNav">
        <a href="counter.html">ğŸ“ æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆ</a> 
        <a href="roulette.html">ğŸ² ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</a> 
        <a href="settings.html" class="active-tab">âš™ è¨­å®š</a>
        <a href="help.html">ãƒ˜ãƒ«ãƒ—</a>
        <a href="about.html">åˆ¶ä½œè€…</a>
    </nav>
    
    <div class="content-wrapper">
        <h1>è¨­å®š (SP)</h1>

        <div class="setting-group">
            <h2>ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ†ãƒ¼ãƒ</h2>
            <div class="setting-item">
                <label>ãƒ†ãƒ¼ãƒã‚’é¸æŠ</label>
                <div class="theme-options">
                    <button onclick="setTheme('light_green')">Light Green</button>
                    <button onclick="setTheme('dark_blue')">Dark Blue</button>
                    <button onclick="setTheme('simple_white')">Simple White</button>
                </div>
            </div>
        </div>

        <div class="setting-group">
            <h2>ã‚«ã‚¹ã‚¿ãƒ ç›®æ¨™ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼è¨­å®š</h2>
            <div class="setting-item">
                <label for="customTargetValue">ç›®æ¨™å›æ•°/ç›®æ¨™å€¤</label>
                <input type="number" id="customTargetValue" min="1" value="1000">
            </div>
            <div style="text-align: right; padding-top: 15px;">
                <button onclick="saveCustomCounterSettings()">è¨­å®šã‚’ä¿å­˜</button>
            </div>
        </div>

        <div class="setting-group">
            <h2>å…¥åŠ›ãƒ»è¡¨ç¤ºè¨­å®š</h2>
            <div class="setting-item">
                <label for="ignoreSpaces">ã‚¹ãƒšãƒ¼ã‚¹ï¼ˆç©ºç™½ï¼‰ã‚’ã‚«ã‚¦ãƒ³ãƒˆã—ãªã„</label>
                <input type="checkbox" id="ignoreSpaces">
            </div>
            <div class="setting-item">
                <label for="hideAds">åºƒå‘Šã®è¡¨ç¤ºã‚’ç„¡åŠ¹ã«ã™ã‚‹</label>
                <input type="checkbox" id="hideAds">
            </div>
            <div style="text-align: right; padding-top: 15px;">
                <button onclick="saveDisplaySettings()">è¡¨ç¤ºè¨­å®šã‚’ä¿å­˜</button>
            </div>
        </div>
        
        <div class="setting-group">
            <h2>å±¥æ­´ç®¡ç†</h2>
            <div style="text-align: right; padding-top: 15px;">
                <button onclick="clearHistory()" style="background-color: #d9534f; color: white; padding: 10px 15px; border: none; border-radius: 4px;">å±¥æ­´ã‚’ã™ã¹ã¦ã‚¯ãƒªã‚¢</button>
            </div>
        </div>

    </div>
</div>

<div class="bottom-ad-footer" style="height: 50px;">
    <div id="ad-area-bottom-sp">
        <script src="https://adm.shinobi.jp/o/b4938a5bb7d245347d3a4f3bf5b38328"></script>
        </div>
</div>

<footer class="footer" style="text-align:center; padding: 20px 0; font-size: 0.8em; color: var(--text-soft);">
    <p>Version <span id="appVersionDisplay"></span></p>
</footer>
</body>
</html>
