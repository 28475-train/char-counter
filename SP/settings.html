<!DOCTYPE html>
<html lang="ja" data-ads="true">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ã€SPç‰ˆã€‘è¨­å®š | ãƒ„ãƒ¼ãƒ«</title>
<link rel="stylesheet" href="../style.css">
<style>
/* è¨­å®šå›ºæœ‰ã®ã‚¹ã‚¿ã‚¤ãƒ« (SPç‰ˆèª¿æ•´) */
.settings-group {
    background: var(--card);
    padding: 15px; /* SPç‰ˆã«åˆã‚ã›ã¦ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°èª¿æ•´ */
    border-radius: 8px;
    box-shadow: var(--shadow);
    margin-bottom: 20px;
    border: 1px solid var(--border);
}

.settings-group h2 {
    margin-top: 0;
    font-size: 1.3em;
    border-bottom: 2px solid var(--accent-light);
    padding-bottom: 5px;
    margin-bottom: 15px;
}

.setting-item {
    display: flex;
    flex-direction: column; /* SPç‰ˆã§ã¯ç¸¦ã«ä¸¦ã¹ã‚‹ */
    align-items: flex-start;
    padding: 12px 0;
    border-bottom: 1px solid var(--border);
}
.setting-item:last-child {
    border-bottom: none;
}

.setting-label {
    font-weight: bold;
    color: var(--text-color);
    margin-bottom: 5px;
    font-size: 1em;
}

.setting-control {
    width: 100%; /* ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’å¹…ã„ã£ã±ã„ã«ã™ã‚‹ */
    display: flex;
    justify-content: flex-end; /* å³å¯„ã› */
    align-items: center;
}

.setting-control select, 
.setting-control input[type="date"],
.setting-control input[type="time"] {
    padding: 8px;
    border: 1px solid var(--border);
    border-radius: 4px;
    background-color: var(--background);
    color: var(--text-color);
    flex-grow: 1; /* å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’åºƒã’ã‚‹ */
}

.setting-control button {
    padding: 10px 15px;
    background-color: var(--accent);
    color: #fff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 0.9em;
}

.message {
    margin-top: 15px;
    padding: 10px;
    border-radius: 4px;
    background-color: #e6ffe6;
    color: #388E3C;
    font-weight: bold;
    display: none;
    font-size: 0.9em;
}

#targetTime {
    width: 100%; /* ç›®æ¨™æ™‚åˆ»ã‚‚å¹…ã„ã£ã±ã„ã« */
}

#targetDate {
    width: 100%; /* ç›®æ¨™æ—¥ä»˜ã‚‚å¹…ã„ã£ã±ã„ã« */
}

</style>
</head>
<body data-theme="light_green">
<script>
// --- ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ± ---
const APP_VERSION = "v1.2.0"; 
// ----------------------
const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
if (!isMobile) { location.href = '../settings.html'; }

function toggleMenu() { document.getElementById('sideNav').classList.toggle('open'); }

// â˜…â˜…â˜… æ©Ÿèƒ½å¾©æ—§: ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆãƒ­ã‚¸ãƒƒã‚¯ â˜…â˜…â˜…
function applyTheme(theme) {
    document.body.setAttribute('data-theme', theme);
    localStorage.setItem('selectedTheme', theme);
}

// â˜…â˜…â˜… æ©Ÿèƒ½å¾©æ—§: ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆç›®æ¨™è¨­å®šãƒ­ã‚¸ãƒƒã‚¯ â˜…â˜…â˜…
function saveRouletteSettings() {
    const targetDate = document.getElementById('targetDate').value;
    const targetTime = document.getElementById('targetTime').value;
    const rouletteItems = document.getElementById('rouletteItems').value;

    if (!targetDate || !targetTime) {
        showSuccessMessage("ã‚¨ãƒ©ãƒ¼: ç›®æ¨™æ—¥æ™‚ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚", true);
        return;
    }

    // æ—¥ä»˜ã¨æ™‚é–“ã‚’çµåˆã—ã¦Dateã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
    const targetDateTimeString = targetDate + "T" + targetTime + ":00";
    const targetDateTime = new Date(targetDateTimeString);

    // LocalStorageã«ä¿å­˜
    localStorage.setItem('rouletteTargetDate', targetDateTime.toISOString());
    localStorage.setItem('rouletteItems', rouletteItems);
    
    showSuccessMessage("ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã®è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚", false);
}

function showSuccessMessage(message, isError) {
    const msgElement = document.getElementById('successMessage');
    msgElement.textContent = message;
    
    if (isError) {
        msgElement.style.backgroundColor = '#ffe6e6';
        msgElement.style.color = '#CC0000';
    } else {
        msgElement.style.backgroundColor = '#e6ffe6';
        msgElement.style.color = '#388E3C';
    }

    msgElement.style.display = 'block';
    setTimeout(() => {
        msgElement.style.display = 'none';
    }, 3000);
}

window.onload = function() { 
    document.getElementById('appVersionDisplay').textContent = APP_VERSION; 

    // ãƒ†ãƒ¼ãƒã®ãƒ­ãƒ¼ãƒ‰ã¨ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
    const savedTheme = localStorage.getItem('selectedTheme') || 'light_green';
    document.getElementById('themeSelector').value = savedTheme;
    applyTheme(savedTheme);

    document.getElementById('themeSelector').addEventListener('change', (e) => {
        applyTheme(e.target.value);
    });

    // ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆè¨­å®šã®ãƒ­ãƒ¼ãƒ‰ã¨ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
    document.getElementById('saveRouletteButton').addEventListener('click', saveRouletteSettings);

    // æ—¢å­˜ã®ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆè¨­å®šã‚’ãƒ­ãƒ¼ãƒ‰
    const savedDate = localStorage.getItem('rouletteTargetDate');
    if (savedDate) {
        const dateObj = new Date(savedDate);
        document.getElementById('targetDate').value = dateObj.toISOString().slice(0, 10);
        document.getElementById('targetTime').value = dateObj.toTimeString().slice(0, 5); 
    }
    const savedItems = localStorage.getItem('rouletteItems') || "æˆåŠŸ,å¤±æ•—,å¤§æˆåŠŸ,ã‚„ã‚Šç›´ã—";
    document.getElementById('rouletteItems').value = savedItems;
}
</script>

<div class="main-content-area">

    <header class="header">
        <div class="menu-toggle" onclick="toggleMenu()">â˜°</div>
        <a href="counter.html" class="header-title" style="font-size: 1.2em;">è¨­å®š (SPç‰ˆ)</a>
    </header>

    <div class="top-ad-header" style="height: 50px;">
        <div id="ad-area-top-sp">
            <script src="https://adm.shinobi.jp/o/b4938a5bb7d245347d3a4f3bf5b38328"></script>
        </div>
    </div>

    <nav class="side-nav" id="sideNav">
        <a href="counter.html">ğŸ“ æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆ</a> 
        <a href="roulette.html">ğŸ² ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</a> 
        <a href="settings.html" class="active-tab">âš™ è¨­å®š</a>
        <a href="help.html">ãƒ˜ãƒ«ãƒ—</a>
        <a href="about.html">åˆ¶ä½œè€…</a>
    </nav>
    
    <div class="content-wrapper">

        <h1>è¨­å®š</h1>
        
        <div id="successMessage" class="message"></div>

        <div class="settings-group">
            <h2>ãƒ‡ã‚¶ã‚¤ãƒ³è¨­å®š</h2>
            
            <div class="setting-item">
                <span class="setting-label">ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼</span>
                <div class="setting-control">
                    <select id="themeSelector">
                        <option value="light_green">ãƒ©ã‚¤ãƒˆã‚°ãƒªãƒ¼ãƒ³ (æ¨™æº–)</option>
                        </select>
                </div>
            </div>

            <div class="setting-item">
                <span class="setting-label">ãƒ•ã‚©ãƒ³ãƒˆè¨­å®š</span>
                <div class="setting-control">
                    <p style="font-size: 0.8em; color: var(--text-soft); text-align: right;">æ—¥æœ¬èªãƒ»è‹±èªã«æœ€é©ãªãƒ•ã‚©ãƒ³ãƒˆã‚’è‡ªå‹•é©ç”¨ä¸­</p>
                </div>
            </div>

        </div>

        <div class="settings-group">
            <h2>ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆãƒ»ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ç›®æ¨™è¨­å®š</h2>
            
            <div class="setting-item">
                <span class="setting-label">ç›®æ¨™æ—¥ä»˜</span>
                <div class="setting-control">
                    <input type="date" id="targetDate">
                </div>
            </div>

            <div class="setting-item">
                <span class="setting-label">ç›®æ¨™æ™‚åˆ»</span>
                <div class="setting-control">
                    <input type="time" id="targetTime">
                </div>
            </div>

            <div class="setting-item">
                <span class="setting-label">ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆé …ç›® (ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š)</span>
                <textarea id="rouletteItems" style="width: 100%; min-height: 60px; font-size: 14px;"></textarea>
                <p style="font-size: 0.8em; color: var(--text-soft); margin-top: 5px;">ä¾‹: å¤§æˆåŠŸ,æˆåŠŸ,å¤±æ•—</p>
            </div>

            <div style="text-align: right; margin-top: 15px;">
                <button id="saveRouletteButton">è¨­å®šã‚’ä¿å­˜</button>
            </div>
        </div>

        <div class="settings-group">
            <h2>ãƒ‡ãƒ¼ã‚¿ç®¡ç†</h2>
            <div class="setting-item">
                <span class="setting-label">ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ã®ã‚¯ãƒªã‚¢</span>
                <div class="setting-control">
                    <button onclick="if(confirm('å…¨ã¦ã®ãƒ­ãƒ¼ã‚«ãƒ«è¨­å®šã¨ä¿å­˜ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ')) { localStorage.clear(); window.location.reload(); }">ãƒ‡ãƒ¼ã‚¿å‰Šé™¤</button>
                </div>
            </div>
        </div>
        
    </div>
</div>

<div class="bottom-ad-footer" style="height: 50px;">
    <div id="ad-area-bottom-sp">
        <script src="https://adm.shinobi.jp/o/b4938a5bb7d245347d3a4f3bf5b38328"></script>
    </div>
</div>

<footer class="footer" style="text-align:center; padding: 20px 0; font-size: 0.8em; color: var(--text-soft);">
    <p>Version <span id="appVersionDisplay"></span></p>
</footer>
</body>
</html>
