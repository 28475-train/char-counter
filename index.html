<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="language" content="ja">
<title>åˆæœŸè¨­å®šãƒ»åŒæ„</title>

<style>
body {
  font-family:"Noto Sans JP","Hiragino Kaku Gothic ProN",system-ui,sans-serif;
  background:#f3f4f6;
  display:flex;
  align-items:center;
  justify-content:center;
  height:100vh;
  margin:0;
}

.modal {
  background:#ffffff;
  border-radius:16px;
  padding:24px;
  max-width:420px;
  width:100%;
  box-shadow:0 10px 30px rgba(0,0,0,0.15);
}

h1 {
  margin-top:0;
  font-size:1.4em;
  text-align:center;
}

section {
  margin-top:16px;
}

button {
  width:100%;
  margin-top:8px;
  padding:12px;
  border:none;
  border-radius:8px;
  background:#2563eb;
  color:#fff;
  font-size:1em;
  cursor:pointer;
}

button.sub {
  background:#64748b;
}

button.agree {
  background:#16a34a;
  font-weight:bold;
}

.notice {
  margin-top:12px;
  font-size:0.85em;
  color:#555;
  text-align:center;
}

.notice a {
  color:#2563eb;
  text-decoration:none;
}
</style>
</head>

<body>

<div class="modal">
  <h1>ã”åˆ©ç”¨ã«ã‚ãŸã£ã¦</h1>

  <section>
    <p>è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ã‚’é¸æŠã—ã¦ãã ã•ã„</p>
    <button onclick="setView('sp')">ğŸ“± ã‚¹ãƒãƒ›è¡¨ç¤º</button>
    <button onclick="setView('pc')">ğŸ–¥ PCè¡¨ç¤º</button>
  </section>

  <section>
    <p>åºƒå‘Šè¡¨ç¤º</p>
    <button onclick="setAds(true)">åºƒå‘Šã‚’è¡¨ç¤ºã™ã‚‹</button>
    <button onclick="setAds(false)">åºƒå‘Šã‚’è¡¨ç¤ºã—ãªã„</button>
  </section>

  <section>
    <button class="agree" onclick="agree()">åŒæ„ã—ã¦åˆ©ç”¨é–‹å§‹</button>
  </section>

  <div class="notice">
    <a href="terms.html">åˆ©ç”¨è¦ç´„</a> /
    <a href="terms.html#privacy">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a> /
    <a href="terms.html#ads">åºƒå‘Šãƒãƒªã‚·ãƒ¼</a>
  </div>
</div>

<script>
'use strict';

/* ===== åŒæ„ãƒ­ã‚°é€ä¿¡å…ˆï¼ˆæŒ‡å®šURLï¼‰ ===== */
const GAS_URL =
  "https://script.google.com/macros/s/AKfycbxmgrljU-iNc8kpe7uZ3fDIAYGjE9JNq5ENi8wG6w7mPcBbg5F601rosrJ4ZNVUOUg/exec";

let viewMode = null;
let adsMode = null;

function setView(v) {
  viewMode = v;
  localStorage.setItem('viewMode', v);
}

function setAds(v) {
  adsMode = v;
  localStorage.setItem('showAds', v ? 'true' : 'false');
}

function agree() {
  if (!viewMode || adsMode === null) {
    alert('ã™ã¹ã¦é¸æŠã—ã¦ãã ã•ã„');
    return;
  }

  localStorage.setItem('agreed', 'true');

  /* åŒæ„æ—¥æ™‚ã®ã¿é€ä¿¡ */
  fetch(GAS_URL, { method:'POST', mode:'no-cors' });

  location.href = 'counter.html';
}

/* æ—¢ã«åŒæ„æ¸ˆã¿ãªã‚‰ã‚¹ã‚­ãƒƒãƒ— */
if (localStorage.getItem('agreed') === 'true') {
  location.href = 'counter.html';
}
</script>

</body>
</html>
