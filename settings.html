<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>è¨­å®š | ãƒ„ãƒ¼ãƒ«</title>
<link rel="stylesheet" href="style.css">
<style>
/* settings.htmlå°‚ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« (çœç•¥) */
</style>
</head>
<body data-theme="light_green">
<script>
// ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã®ãƒ†ãƒ¼ãƒé©ç”¨ (å…±é€š)
const body = document.body;
const savedTheme = localStorage.getItem('theme') || 'light_green';
body.setAttribute('data-theme', savedTheme);
</script>

<header class="header">
    <a href="counter.html" class="header-title">ğŸ“ æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆ ãƒ„ãƒ¼ãƒ«</a>
    <nav class="header-nav">
        <a href="roulette.html">ğŸ² ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</a> 
        <a href="settings.html">âš™ è¨­å®š</a>
        <a href="help.html">ãƒ˜ãƒ«ãƒ—</a>
        <a href="about.html">åˆ¶ä½œè€…</a>
    </nav>
</header>
<div class="content-wrapper">

<h1>è¨­å®š</h1>

<div class="setting-group">
    <h2>ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ†ãƒ¼ãƒ</h2>
    <div class="setting-item">
        <label>ãƒ†ãƒ¼ãƒã‚’é¸æŠ</label>
        <div class="theme-options">
            <button onclick="setTheme('light_green')">Light Green</button>
            <button onclick="setTheme('dark_blue')">Dark Blue</button>
            <button onclick="setTheme('simple_white')">Simple White</button>
        </div>
    </div>
</div>

<div class="setting-group">
    <h2>è¨ªå•å›æ•°ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼è¨­å®š (counter.html)</h2>
    <div class="setting-item">
        <label for="hideAccessCounter">è¨ªå•å›æ•°ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®è¡¨ç¤ºã‚’å®Œå…¨ã«ç„¡åŠ¹ã«ã™ã‚‹</label>
        <input type="checkbox" id="hideAccessCounter">
    </div>
    <div class="setting-item">
        <label for="ignoreAnimation">ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®**ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³**ã‚’ç„¡åŠ¹ã«ã™ã‚‹</label>
        <input type="checkbox" id="ignoreAnimation">
    </div>
</div>

<div class="setting-group">
    <h2>ã‚«ã‚¹ã‚¿ãƒ ç›®æ¨™ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼è¨­å®š (roulette.html)</h2>
    <div class="setting-item">
        <label for="customTargetValue">ç›®æ¨™å›æ•°/ç›®æ¨™å€¤ï¼ˆãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆãƒ»ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³æ™‚ï¼‰</label>
        <input type="number" id="customTargetValue" min="1" value="1000" style="width: 100px;">
    </div>
    <div class="setting-item">
        <label for="customStartDate">é–‹å§‹æ™‚åˆ»ï¼ˆã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—æ™‚ï¼‰</label>
        <input type="datetime-local" id="customStartDate">
    </div>
    <div class="setting-item">
        <label for="customModeSelect">å‹•ä½œãƒ¢ãƒ¼ãƒ‰</label>
        <select id="customModeSelect">
            <option value="none">ç„¡åŠ¹</option>
            <option value="countdown">ç›®æ¨™å€¤ã‹ã‚‰ã®ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ (å›æ•°)</option>
            <option value="countup">é–‹å§‹æ™‚åˆ»ã‹ã‚‰ã®ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ— (æ™‚é–“)</option>
            <option value="roulette">ç›®æ¨™å€¤ã§ã®ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</option>
        </select>
    </div>
    <div style="text-align: right; padding-top: 10px;">
        <button onclick="saveCustomCounterSettings()">è¨­å®šã‚’ä¿å­˜</button>
    </div>
</div>
</div>

<script>
/* ===== å…±é€šæ©Ÿèƒ½ ===== */
function setTheme(theme) { /* æ—¢å­˜ã® setTheme é–¢æ•° */ }

// (æ—¢å­˜ã®è¨ªå•å›æ•°ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼è¨­å®šã®å‡¦ç†ã¯çœç•¥)


/* ===== â˜…â˜…â˜… ã‚«ã‚¹ã‚¿ãƒ ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼è¨­å®šã®å‡¦ç† (ã‚³ã‚¢) â˜…â˜…â˜… */
const customTargetValueInput = document.getElementById('customTargetValue');
const customStartDateInput = document.getElementById('customStartDate');
const customModeSelect = document.getElementById('customModeSelect');

function loadCustomCounterUISettings() {
    const savedSettings = localStorage.getItem('customCounterSettings');
    let settings = {};

    if (savedSettings) {
        settings = JSON.parse(savedSettings);
        
        customTargetValueInput.value = settings.target || 1000;
        customModeSelect.value = settings.mode || 'none';
        
        // æ—¥æ™‚ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¸ã®å€¤ã®è¨­å®š
        if (settings.start) {
            try {
                const date = new Date(settings.start);
                const localDateString = date.toLocaleString('sv-SE').substring(0, 16).replace(' ', 'T');
                customStartDateInput.value = localDateString;
            } catch(e) {
                console.error("æ—¥æ™‚è¨­å®šã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:", e);
                customStartDateInput.value = '';
            }

        }
    } 
    
    // è¨­å®šãŒãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ãªã„ã‹ã€æ—¥æ™‚ãŒãªã„å ´åˆã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
    if (!customStartDateInput.value) {
        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const day = String(now.getDate()).padStart(2, '0');
        const hour = String(now.getHours()).padStart(2, '0');
        const minute = String(now.getMinutes()).padStart(2, '0');
        customStartDateInput.value = `${year}-${month}-${day}T${hour}:${minute}`;
    }
}

function saveCustomCounterSettings() {
    const targetValue = parseInt(customTargetValueInput.value, 10);
    const mode = customModeSelect.value;
    
    if ((mode === 'countdown' || mode === 'roulette') && (isNaN(targetValue) || targetValue <= 0)) {
        alert("ç›®æ¨™å€¤ã«ã¯1ä»¥ä¸Šã®æœ‰åŠ¹ãªæ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
        return;
    }

    const selectedDateTime = customStartDateInput.value;
    
    const newSettings = {
        // roulette.htmlã¯å¸¸ã«è¡¨ç¤ºã•ã‚Œã‚‹ãŸã‚ã€showãƒ•ãƒ©ã‚°ã¯ä¸è¦
        target: targetValue,
        start: selectedDateTime ? new Date(selectedDateTime).toISOString() : null, 
        mode: mode
    };

    localStorage.setItem('customCounterSettings', JSON.stringify(newSettings));
    alert('ã‚«ã‚¹ã‚¿ãƒ ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚roulette.html ã§åæ˜ ã•ã‚Œã¾ã™ã€‚');
    loadCustomCounterUISettings(); 
}

window.addEventListener('load', loadCustomCounterUISettings);
/* â˜…â˜…â˜… ã“ã“ã¾ã§ã‚«ã‚¹ã‚¿ãƒ è¨­å®š â˜…â˜…â˜… */
</script>
</body>
</html>
